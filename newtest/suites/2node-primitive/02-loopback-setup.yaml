name: loopback-setup
description: |
  Configure Loopback0 IP on both switches.
  Uses primitive configure-loopback (not provision), so only touches
  LOOPBACK_INTERFACE â€” no wipe of CONFIG_DB, no MAC loss.
topology: 2node
requires: [boot-ssh]

steps:
  - name: configure-loopback
    action: configure-loopback
    devices: all

  - name: verify-loopback-switch1
    action: verify-config-db
    devices: [switch1]
    table: LOOPBACK_INTERFACE
    key: "Loopback0"
    expect:
      exists: true

  - name: verify-loopback-switch2
    action: verify-config-db
    devices: [switch2]
    table: LOOPBACK_INTERFACE
    key: "Loopback0"
    expect:
      exists: true
