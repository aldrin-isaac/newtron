name: ping-loopback
description: Verify dataplane reachability between switch1 and switch2 loopbacks
topology: 2node
requires: [route-propagation]

steps:
  # Ping switch2 loopback from switch1
  - name: ping-switch1-to-switch2
    action: verify-ping
    devices: [switch1]
    target: "10.0.0.11"
    count: 5
    expect:
      success_rate: 0.8

  # Ping switch1 loopback from switch2
  - name: ping-switch2-to-switch1
    action: verify-ping
    devices: [switch2]
    target: "10.0.0.1"
    count: 5
    expect:
      success_rate: 0.8
