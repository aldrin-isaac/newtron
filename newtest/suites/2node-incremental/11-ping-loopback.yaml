name: ping-loopback
description: Verify dataplane reachability between spine1 and leaf1 loopbacks
topology: 2node
platform: sonic-vpp
requires: [route-propagation]

steps:
  # Ping leaf1 loopback from spine1
  - name: ping-spine1-to-leaf1
    action: verify-ping
    devices: [spine1]
    target: "10.0.0.11"
    count: 5
    expect:
      success_rate: 0.8

  # Ping spine1 loopback from leaf1
  - name: ping-leaf1-to-spine1
    action: verify-ping
    devices: [leaf1]
    target: "10.0.0.1"
    count: 5
    expect:
      success_rate: 0.8
