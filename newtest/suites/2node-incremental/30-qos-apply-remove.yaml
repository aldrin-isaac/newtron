name: qos-apply-remove
description: "QoS policy apply and remove on interface"
topology: 2node
requires: [provision]

steps:
  - name: apply-qos
    action: apply-qos
    devices: [leaf1]
    params:
      interface: Ethernet2
      qos_policy: 4q-customer

  - name: verify-qos-applied
    action: verify-config-db
    devices: [leaf1]
    table: PORT_QOS_MAP
    key: Ethernet2
    expect:
      exists: true

  - name: remove-qos
    action: remove-qos
    devices: [leaf1]
    params:
      interface: Ethernet2

  - name: verify-qos-removed
    action: verify-config-db
    devices: [leaf1]
    table: PORT_QOS_MAP
    key: Ethernet2
    expect:
      exists: false
